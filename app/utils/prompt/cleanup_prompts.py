"""Cleanup graph prompts."""

ANALYSIS_PROMPT ="""
아래는 유저와 AI 비서의 대화 내용입니다.
이 중에서 반복성 업무, 알림, 일정 등록 등 자동화가 필요한 user(유저) 메시지의 원문만 모두 골라 아래 JSON 배열에 content 필드로만 출력하세요.

- **"지금 당장 ~해줘", "바로 알려줘", "지금 검색해줘"**와 같이 실시간 즉시 처리 요청은 제외하세요.
- **"~까지 ~해줘", "매주/매일/매월 ~", "내일 오전 9시에 ~", "앞으로 매주 ~", "매달 첫째주 ~", "다음주 월요일 아침에 ~"** 등과 같이 특정 시간, 기한, 반복 주기가 명시된 예약/반복/기한 업무 요청만 포함하세요.

[응답 형식]
{
  "content": ["매주 월요일 오전 9시까지 기획안 초안 작성해줘", "기획안 초안 작성 끝나면 요약해서 팀 노션에 올려줘"]  
}

[주의사항]
- 반드시 위 JSON 딕셔너리(객체) 구조로만 응답하세요.
- content에는 자동화 업무로 전환할 수 있는 user 메시지만 남기고, 나머지는 포함하지 마세요.
- 중복, 유사 메시지는 하나의 content로 합쳐서 작성하세요.
- automation_requests 배열이 비어 있으면 "automation_requests": []로 응답하세요.

"""

TASK_GENERATION_PROMPT = """
아래는 자동화가 필요한 대화 원문 리스트입니다.
이 메시지들을 참고하여, 반복성 업무, 알림, 일정, 선행/후속 업무, 실행 시간 등 
자동화가 필요한 업무를 아래 JSON 배열 형식으로 입력하세요.

대화 원문 리스트:
{analysis_result}

[응답 형식]
[
  {{
    "title": "업무명",
    "description": "업무 설명",
    "repeat": "반복 조건 (cron 형식으로, 반복 없으면 빈 문자열)",
    "preferred_at": "실행 시간 (ISO8601, 반복 업무의 경우 첫 실행 시각)",
    "dependencies": ["의존 업무명 (없으면 빈 배열)"],
    "category": "카테고리 (예: 일정, 리마인더, 알림, 기록 등)"
  }}
]

[주의사항]
- 반드시 위와 같이 각 업무가 객체(dict)로, title, description 등 모든 필드를 포함해야 합니다.
- 문자열만 있는 배열로 응답하지 마세요.

[필드 타입/포맷]
- repeat은 반드시 문자열로, 반복이 없으면 ""(빈 문자열)로 입력하세요.
- dependencies는 반드시 배열로, 없으면 []로 입력하세요.
- preferred_at은 반드시 ISO8601 형식(YYYY-MM-DDTHH:MM:SS)으로 입력하세요.
- 사용자가 실행 시간을 날짜만 제시하고 시간 정보를 명확하게 말하지 않으면, preferred_at의 시간(HH:MM:SS) 부분은 기본적으로 09:00:00(오전 9시)로 입력하세요.
  - 예: "6월 10일까지" → "2025-06-10T09:00:00"
- category는 예시(일정, 리마인더, 알림, 기록, 뉴스 요약, 노션 등록, 아티클 작성 등)와 같이 구체적으로 작성하세요.

[업무 유형별 작성 규칙]
- 반복 업무(repeat이 있는 경우): repeat에 cron 형식("0 8 * * 1" 등)을 입력하고, preferred_at에는 첫 실행 시각 또는 기준 시간만 입력하세요.
- 일회성 업무(repeat이 없는 경우): repeat을 ""(빈 문자열)로 입력하세요.
- preferred_at은 유저가 제공 받길 원하는 시간(마감 등)을 입력하세요.

[구조화/의존성]
- "A 끝나면 B 실행"처럼 순서/연결이 있는 경우, 후속 업무의 dependencies에 반드시 선행 업무명을 넣으세요.
- "A 끝나면 B 실행"처럼 순서/연결이 있는 경우, 후속 업무도 선행 업무와 동일한 repeat을 입력하세요.
- 유사/중복 업무는 하나로 합치세요.

[금지/누락/명확성]
- 반드시 위 JSON 배열 형식으로만 응답하세요.
- 추가 설명, 마크다운, 다른 형식의 텍스트는 포함하지 마세요.
- description에는 “기한(날짜), 반복 주기” 등은 넣지 말고 오직 업무의 실제 내용과 목적만 입력하세요.
- title, description, preferred_at, category 필드는 항상 누락 없이 입력하세요.
- repeat, dependencies가 없을 경우 각각 ""(빈 문자열), [](빈 배열)로 입력하세요.


[예시]
대화 원문:
{{
  "content": ["매주 월요일 오전 9시까지 기획안 초안 작성해줘", "기획안 초안 작성 끝나면 요약해서 팀 노션에 올려줘"]  
}}

응답:
[
  {{
    "title": "기획안 초안 작성",
    "description": "월요일 오전 9시까지 기획안 초안을 작성",
    "repeat": "0 9 * * 1",
    "preferred_at": "2025-06-10T09:00:00",
    "dependencies": [],
    "category": "기획안 작성"
  }},
  {{
    "title": "기획안 요약본 노션 업로드",
    "description": "작성 완료된 기획안 초안을 요약해서 팀 노션에 업로드",
    "repeat": "30 9 * * 1",
    "preferred_at": "2025-06-10T09:30:00",
    "dependencies": ["기획안 초안 작성"],
    "category": "노션 등록"
  }}
"""

# ANALYSIS_PROMPT = """ 당신은 대화 분석 전문가입니다. 아래 대화를 분석하여 JSON 형식으로 응답해주세요.

# [응답 형식]
# 반드시 아래와 같은 JSON 형식으로만 응답해주세요. 다른 설명이나 텍스트는 포함하지 마세요:
# {
#     "topics": ["주제1", "주제2", ...],
#     "action_items": ["작업1", "작업2", ...],
#     "decisions": ["결정1", "결정2", ...],
#     "follow_ups": ["후속조치1", "후속조치2", ...]
# }

# [분석 항목]
# 1. topics: 대화에서 논의된 주요 주제들을 추출
# 2. action_items: 언급된 구체적인 작업이나 액션 아이템
# 3. decisions: 내려진 중요한 결정사항들
# 4. follow_ups: 후속 조치가 필요한 항목들

# [주의사항]
# - 반드시 JSON 형식으로만 응답해주세요
# - 각 항목은 구체적이고 명확하게 작성해주세요
# - 주요 주제들 중 유사한 카테고리에 속하는 주제들이 있다면 그 주제들은 하나의 주제로 통합해주세요
# - 배열이 비어있어도 빈 배열([])로 표시해주세요
# - 마크다운이나 다른 형식의 텍스트는 포함하지 마세요."""

# TASK_GENERATION_PROMPT = """다음 대화 분석 결과를 바탕으로 AI가 수행해야 할 구체적인 업무들을 생성해주세요:

# 분석 결과:
# {analysis_result}

# 각 업무에 대해 다음 정보를 포함해주세요:
# 1. 업무 제목
# 2. 업무 설명
# 3. 우선순위 (high/medium/low)
# 4. 의존성 (있는 경우)
# 5. 분석 결과에 있는 연관 topic

# 응답은 다음 키를 가진 JSON 배열 형식으로 작성해주세요:
# - title: 업무 제목
# - description: 업무 설명
# - priority: 우선순위
# - dependencies: 의존 업무 목록
# - topic: 분석 결과에 있는 연관 topic

# [주의사항]
# - 반드시 JSON 형식으로만 응답해주세요
# - 의존 업무 목록으로 연결되었다면 업무 제목을 통일시켜주세요
# - dependencies는 가장 관련 있는 업무 제목만 추가해주세요
# - 각 업무는 구체적이고 실행 가능한 형태로 작성해주세요.""" 